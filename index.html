<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CODY TOES</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background-color: #6a0dad;
      color: white;
      overflow: hidden;
    }
    header {
      background-color: #4b0082;
      text-align: center;
      padding: 1em;
      font-size: 2em;
      font-weight: bold;
      position: relative;
    }
    #totalMoney {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 1em;
      color: #00ff99;
    }
    .popup, .auction {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      background-color: rgba(0,0,0,0.85);
      z-index: 1000;
    }
    .popup-content {
      background: #fff;
      color: #333;
      padding: 2em;
      border-radius: 10px;
      text-align: center;
      width: 300px;
    }
    button {
      margin: 0.5em;
      padding: 1em 2em;
      font-size: 1em;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      background-color: #6a0dad;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #4b0082;
    }
    input {
      width: 90%;
      padding: 0.5em;
      margin-bottom: 1em;
      font-size: 1em;
      border: 2px solid #6a0dad;
      border-radius: 8px;
    }
    .auction-view {
      display: flex;
      justify-content: space-around;
      padding: 2em;
      width: 100%;
    }
    .auction-left {
      flex: 1;
      margin-right: 2em;
    }
    .auction-right {
      width: 300px;
      background: rgba(255,255,255,0.1);
      padding: 1em;
      border-radius: 10px;
      max-height: 400px;
      overflow-y: auto;
    }
    .chat-msg {
      margin: 0.5em 0;
      background-color: rgba(255,255,255,0.2);
      padding: 0.5em;
      border-radius: 5px;
    }
    .money-counter {
      font-size: 2em;
      color: #00ff99;
      margin-top: 1em;
    }
  </style>
</head>
<body>

  <header>
    CODY TOES
    <div id="totalMoney">Total Money: $0</div>
  </header>

  <div class="popup" id="popup">
    <div class="popup-content">
      <h2>Name your product</h2>
      <input type="text" id="productName" placeholder="Product name" />
      <button onclick="startAuction('buy')">Buy Cody Toes</button>
      <button onclick="startAuction('sell')">Sell Cody Toes</button>
      <button onclick="showInventory()">Inventory</button>
      <p>Made by: <strong>sodio</strong></p>
      <p>Current visitors: <span id="visitorCount"></span></p>
    </div>
  </div>

  <div class="auction" id="auction">
    <div class="auction-view">
      <div class="auction-left">
        <h2 id="auctionTitle"></h2>
        <div id="bidText">Bidding starts...</div>
        <div id="moneyCounter" class="money-counter">$0</div>
        <button id="collectBtn" onclick="collectMoney()" style="display:none;">Collect Money</button>
      </div>
      <div class="auction-right" id="chatBox">
        <h3>Live Reviews</h3>
      </div>
    </div>
  </div>

  <script>
    let totalMoney = parseInt(localStorage.getItem("money")) || 0;
    let inventory = JSON.parse(localStorage.getItem("inventory") || "[]");
    let currentBid = 0;
    let productName = "";
    let auctionType = "";
    document.getElementById("totalMoney").textContent = `Total Money: $${totalMoney}`;
    document.getElementById("visitorCount").textContent = Math.floor(Math.random() * 500 + 1);

    function showInventory() {
      alert("Inventory:\n" + (inventory.length ? inventory.map(i => `â€¢ ${i}`).join("\n") : "Empty"));
    }

    function startAuction(type) {
      const input = document.getElementById("productName").value.trim();
      if (!input) {
        alert("Enter product name.");
        return;
      }
      productName = input;
      auctionType = type;
      currentBid = type === "buy" ? 1000 + Math.floor(Math.random() * 300) : 1500;
      document.getElementById("popup").style.display = "none";
      document.getElementById("auction").style.display = "flex";
      document.getElementById("auctionTitle").textContent = `${type === "buy" ? "Buying" : "Selling"}: ${productName}`;
      document.getElementById("moneyCounter").textContent = "$0";
      document.getElementById("bidText").textContent = `Bidding starts at $500...`;
      document.getElementById("chatBox").innerHTML = "";
      document.getElementById("collectBtn").style.display = "none";

      const messages = [
        "ðŸ”¥ Best purchase I've made this week!",
        "Death is so hot and juicy",
        "Eh, quality could be better.",
        "Totally changed my life. 11/10.",
        "johnbom is so handsome and sigma",
        "Smelled weird out of the box.",
        "Delivery took forever.",
        "Only my grandma likes it."
      ];
      let msgIndex = 0;
      const chatInterval = setInterval(() => {
        if (msgIndex < messages.length) {
          const msg = document.createElement("div");
          msg.className = "chat-msg";
          msg.textContent = messages[msgIndex++];
          document.getElementById("chatBox").appendChild(msg);
        }
      }, 1000);

      let bid = 500;
      const bidText = document.getElementById("bidText");
      const moneyCounter = document.getElementById("moneyCounter");

      const bidInterval = setInterval(() => {
        bid += Math.floor(Math.random() * 100 + 50);
        bidText.textContent = `Current bid: $${bid}`;

        if (bid >= currentBid) {
          clearInterval(chatInterval);
          clearInterval(bidInterval);
          bidText.textContent = `Finalized at $${bid}!`;
          let displayMoney = 0;
          const counter = setInterval(() => {
            if (displayMoney < bid) {
              displayMoney += 50;
              moneyCounter.textContent = `$${displayMoney}`;
            } else {
              clearInterval(counter);
              document.getElementById("collectBtn").style.display = "inline-block";
              currentBid = bid;
            }
          }, 100);
        }
      }, 800);
    }

    function collectMoney() {
      if (auctionType === "sell") {
        totalMoney += currentBid;
        inventory.push(productName);
        alert(`Sold ${productName} for $${currentBid}`);
      } else {
        if (totalMoney >= currentBid) {
          totalMoney -= currentBid;
          inventory.push(productName);
          alert(`Bought ${productName} for $${currentBid}`);
        } else {
          alert("Not enough money to buy.");
          return;
        }
      }
      localStorage.setItem("money", totalMoney);
      localStorage.setItem("inventory", JSON.stringify(inventory));
      document.getElementById("totalMoney").textContent = `Total Money: $${totalMoney}`;
      document.getElementById("auction").style.display = "none";
      document.getElementById("popup").style.display = "flex";
    }

    document.getElementById("popup").style.display = "flex";
  </script>
</body>
</html>
